  <!DOCTYPE html>
<html lang="pt-BR">
    <head>
        <meta charset="UTF-8" />
        <title>Cronos Reservas</title>
        <style>
            body
            {
                margin: 0;
                font-family: Arial, Helvetica, sans-serif;
                background-color: cyan;
            }

            .welcome
            {
                display: flex;
                align-items: center;
                gap: 20px;
                padding: 10px;
                border-radius: 5px;
                margin-bottom: 20px;
            }

            .watch
            {
                width: 10.2%;
            }

            .logo
            {
                width: 150px;
                height: 150px;
                
            }

            .reservation
            {
                transform: translateX(60%);
                width: 89.8;
            }

            .titulo
            {
                margin: 0;
            }

            table
            {
                display: table;
                border-collapse: separate;
                box-sizing: border-box;
                text-indent: initial;
                unicode-bidi: isolate;
                border-spacing: 2px;
                border-color: gray;
                transform: translateX(50%);
            }

            .boasvindas
            {
                text-align: center;
            }

            h2
            {
                text-align: center;
            }

            th 
            {
                border: 1px solid #000000;
                padding: 10px;
                background-color: #817979;
            }
        </style>
    </head>
    <body>
        <header>
            <div class="welcome">
                <img style="width: 10%;" src="/imagem/Logo Cronos.jpeg">
            </div>
            <h1 class="boasvindas">Bem-vindo ao Reservas Cronos!</h1>
        </header>


       <div class="cadastro">
        <h2>Nova Reserva</h2>

        <input id="Id" placeholder="ID (gerado automaticamente)" readonly />

        <input id="Nome" placeholder="Seu nome" />

        <input id="Telefone" placeholder="Seu telefone" />

        <input id="DataInicio" placeholder="Data do começo da reserva" type="date" />

        <input id="DiasAlugados" placeholder="Quantidade de dias" type="number" min="1" />

        <input id="Tamanho" placeholder="Tamanho" readonly />

        <select id="NomeLocal">
            <option value="">Selecione a sala</option>
            <option>Salão Ouro Branco</option>
            <option>Espaço Bella Festa</option>
            <option>Salão Imperial</option>
            <option>Salão Jardim Encantado</option>
            <option>Espaço Premier</option>
            <option>Salão Diamante</option>
            <option>Espaço Viva Eventos</option>
            <option>Salão Harmonia</option>
            <option>Espaço Estilo & Festa</option>
            <option>Salão Crystal</option>
            <option>Espaço Real</option>
            <option>Salão do Lago</option>
            <option>Espaço Aurora</option>
            <option>Salão Elite</option>
            <option>Espaço Bela Vista</option>
            <option>Salão Garden Hall</option>
            <option>Espaço Celebration</option>
            <option>Salão Villa Real</option>
            <option>Espaço Golden</option>
            <option>Salão Riviera</option>
            <option>Espaço Diamantina</option>
            <option>Salão Mirante</option>
            <option>Espaço Platinum</option>
            <option>Salão Roma</option>
            <option>Espaço Magnólia</option>
            <option>Salão Harmonia II</option>
            <option>Espaço Grand Palace</option>
            <option>Salão Versatille</option>
            <option>Espaço Allegro</option>
            <option>Salão Imperial II</option>
            <option>Espaço Aurora II</option>
            <option>Salão Bela Arte</option>
            <option>Espaço Monte Carlo</option>
            <option>Salão Royal Garden</option>
            <option>Espaço Village</option>
            <option>Salão Premier II</option>
            <option>Espaço Vivace</option>
            <option>Salão Riviera II</option>
            <option>Espaço Allegra</option>
            <option>Salão Ouro Branco II</option>
            <option>Espaço Horizon</option>
            <option>Salão Monte Verde</option>
            <option>Espaço Jardim Europa</option>
            <option>Salão Allegro II</option>
            <option>Espaço Vila Nova</option>
            <option>Salão Platinum II</option>
            <option>Espaço Jardim Real</option>
            <option>Salão Bella Vista</option>
            <option>Espaço Lumina</option>
            <option>Salão Estilo</option>
            <option>Espaço Allegretto</option>
            <option>Salão Primavera</option>
            <option>Espaço Golden Hall</option>
            <option>Salão Jardim Bela Vida</option>
            <option>Espaço Magnifique</option>
            <option>Salão Elite II</option>
            <option>Espaço Tradição</option>
            <option>Salão Horizonte</option>
            <option>Espaço Viva La Vida</option>
            <option>Salão Royal Palace</option>
            <option>Espaço Blue Garden</option>
            <option>Salão Platinum Gold</option>
            <option>Espaço Royal Light</option>
            <option>Salão Jardim Europa II</option>
            <option>Espaço Bella Noite</option>
            <option>Salão Cristal Palace</option>
            <option>Espaço Luxor</option>
            <option>Salão Garden Prime</option>
            <option>Espaço Monte Azul</option>
            <option>Salão Crystal Light</option>
            <option>Espaço Vale Encantado</option>
            <option>Salão Roma II</option>
        </select>

        <input id="Valor" placeholder="Valor total" readonly />

        <textarea id="Descricao" placeholder="Descrição"></textarea>
                <button class="btn-success" onclick="adicionarOuAtualizarReserva()">Confirar Reserva</button>
        </div>


            <div class="card">
            <h2>Buscar Referências</h2>
            <input id="filtroId" placeholder="ID" type="number" />
            <input id="filtroNome" placeholder="Nome" />
            <input id="filtroTelefone" placeholder="Telefone" />
            <input id="filtroDataInicio" placeholder="Ano" type="number" />
            <input id="filtroDataFim" placeholder="Ano" type="number" />
            <input id="filtroTamanho" placeholder="number" />
            <input id="filtroNomeLocal" placeholder="local" />
            <input id="filtroValor" placeholder="valor" type="number" />
            <input id="filtroDescricao" placeholder="Descricao" />
            
            </select>
            <button class="btn-primary" onclick="filtrarLivros()">Pesquisar</button>
            <button class="btn-warning" onclick="limparFiltros()">Limpar</button>
        </div>

        <div class="research">
    <h2>Tabela De Reservas</h2>
    <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Nome</th> 
            <th>Telefone</th> 
            <th>Início da reserva</th>
            <th>Fim da reserva</th>
            <th>Tamanho</th>
            <th>Nome do local</th>
            <th>Valor</th>
            <th>Descrição</th>
            <th>Ações</th> 
          </tr>  
        </thead>
        <tbody id="tabela-reservas">
            <tr><td colspan="10" style="text-align: center;">Carregando reservas...</td></tr>
        </tbody>
    </table>
</div>


       <script>
    const API_BASE_URL = 'http://127.0.0.1:5045';
    
    const tamanhosSalas = {
        "Salão Ouro Branco": "Pequeno",
        "Espaço Bella Festa": "Medio",
        "Salão Imperial": "Grande",
        "Salão Jardim Encantado": "Medio",
        "Espaço Premier": "Grande",
        "Salão Diamante": "Grande",
        "Espaço Viva Eventos": "Pequeno",
        "Salão Harmonia": "Medio",
        "Espaço Estilo & Festa": "Grande",
        "Salão Crystal": "Grande",
        "Espaço Real": "Pequeno",
        "Salão do Lago": "Medio",
        "Espaço Aurora": "Pequeno",
        "Salão Elite": "Medio",
        "Espaço Bela Vista": "Grande",
        "Salão Garden Hall": "Grande",
        "Espaço Celebration": "Medio",
        "Salão Villa Real": "Pequeno",
        "Espaço Golden": "Grande",
        "Salão Riviera": "Medio",
        "Espaço Diamantina": "Pequeno",
        "Salão Mirante": "Grande",
        "Espaço Platinum": "Grande",
        "Salão Roma": "Pequeno",
        "Espaço Magnólia": "Medio",
        "Salão Harmonia II": "Medio",
        "Espaço Grand Palace": "Grande",
        "Salão Versatille": "Medio",
        "Espaço Allegro": "Medio",
        "Salão Imperial II": "Grande",
        "Espaço Aurora II": "Pequeno",
        "Salão Bela Arte": "Pequeno",
        "Espaço Monte Carlo": "Grande",
        "Salão Royal Garden": "Grande",
        "Espaço Village": "Medio",
        "Salão Premier II": "Grande",
        "Espaço Vivace": "Medio",
        "Salão Riviera II": "Medio",
        "Espaço Allegra": "Medio",
        "Salão Ouro Branco II": "Pequeno",
        "Espaço Horizon": "Grande",
        "Salão Monte Verde": "Medio",
        "Espaço Jardim Europa": "Grande",
        "Salão Allegro II": "Medio",
        "Espaço Vila Nova": "Medio",
        "Salão Platinum II": "Grande",
        "Espaço Jardim Real": "Medio",
        "Salão Bella Vista": "Grande",
        "Espaço Lumina": "Medio",
        "Salão Estilo": "Pequeno",
        "Espaço Allegretto": "Pequeno",
        "Salão Primavera": "Medio",
        "Espaço Golden Hall": "Grande",
        "Salão Jardim Bela Vida": "Medio",
        "Espaço Magnifique": "Grande",
        "Salão Elite II": "Medio",
        "Espaço Tradição": "Pequeno",
        "Salão Horizonte": "Grande",
        "Espaço Viva La Vida": "Medio",
        "Salão Royal Palace": "Grande",
        "Espaço Blue Garden": "Medio",
        "Salão Platinum Gold": "Grande",
        "Espaço Royal Light": "Medio",
        "Salão Jardim Europa II": "Grande",
        "Espaço Bella Noite": "Medio",
        "Salão Cristal Palace": "Grande",
        "Espaço Luxor": "Grande",
        "Salão Garden Prime": "Grande",
        "Espaço Monte Azul": "Medio",
        "Salão Crystal Light": "Pequeno",
        "Espaço Vale Encantado": "Medio",
        "Salão Roma II": "Pequeno"
    };

    const precoPorTamanho = {
        "Pequeno": 800,
        "Medio": 1200,
        "Grande": 1800
    };

    const descricoesSalas = {
        "Salão Ouro Branco": "Salão amplo com capacidade para 200 pessoas e climatização completa",
        "Espaço Bella Festa": "Ambiente moderno com iluminação de LED e pista de dança",
        "Salão Imperial": "Espaço elegante com palco e cozinha industrial",
        "Salão Jardim Encantado": "Área arborizada com jardim e pergolado para cerimônias",
        "Espaço Premier": "Ambiente sofisticado com estrutura para eventos corporativos",
        "Salão Diamante": "Salão com palco, camarim e iluminação profissional",
        "Espaço Viva Eventos": "Salão versátil para festas de médio porte",
        "Salão Harmonia": "Espaço climatizado com estacionamento e área gourmet",
        "Espaço Estilo & Festa": "Ambiente moderno e totalmente adaptável",
        "Salão Crystal": "Salão com estrutura de som e iluminação integrada",
        "Espaço Real": "Ambiente climatizado com palco e cozinha equipada",
        "Salão do Lago": "Vista para o lago e espaço externo para cerimônias",
        "Espaço Aurora": "Decoração moderna com painéis de LED",
        "Salão Elite": "Espaço premium com climatização e estrutura completa",
        "Espaço Bela Vista": "Vista panorâmica e área verde ao redor",
        "Salão Garden Hall": "Área para eventos ao ar livre com cobertura retrátil",
        "Espaço Celebration": "Ambiente moderno e climatizado com decoração neutra",
        "Salão Villa Real": "Espaço rústico com acabamento em madeira",
        "Espaço Golden": "Salão luxuoso com palco, pista e iluminação cenográfica",
        "Salão Riviera": "Ambiente clean e climatizado com estrutura moderna",
        "Espaço Diamantina": "Espaço aconchegante ideal para eventos familiares",
        "Salão Mirante": "Vista panorâmica da cidade e estacionamento privativo",
        "Espaço Platinum": "Ambiente moderno com estrutura para casamentos",
        "Salão Roma": "Decoração clássica e iluminação quente",
        "Espaço Magnólia": "Salão com área verde e estacionamento amplo",
        "Salão Harmonia II": "Ambiente climatizado com isolamento acústico",
        "Espaço Grand Palace": "Salão luxuoso com palco e área VIP",
        "Salão Versatille": "Espaço modular adaptável para qualquer tipo de evento",
        "Espaço Allegro": "Ambiente acolhedor e moderno com som ambiente",
        "Salão Imperial II": "Espaço nobre com palco, jardim e estrutura completa",
        "Espaço Aurora II": "Ambiente moderno com decoração elegante e iluminação personalizada",
        "Salão Bela Arte": "Espaço climatizado ideal para pequenas recepções",
        "Espaço Monte Carlo": "Ambiente sofisticado com estrutura de som e iluminação",
        "Salão Royal Garden": "Área ajardinada com gazebo e fonte decorativa",
        "Espaço Village": "Espaço moderno com estacionamento amplo",
        "Salão Premier II": "Salão climatizado com estrutura completa para eventos",
        "Espaço Vivace": "Ambiente moderno com área externa para coquetéis",
        "Salão Riviera II": "Espaço elegante com palco e iluminação de destaque",
        "Espaço Allegra": "Ambiente acolhedor ideal para aniversários e formaturas",
        "Salão Ouro Branco II": "Salão nobre com vista panorâmica e climatização total",
        "Espaço Horizon": "Espaço moderno com iluminação natural ampla",
        "Salão Monte Verde": "Ambiente rústico com decoração campestre",
        "Espaço Jardim Europa": "Salão sofisticado com jardins externos integrados",
        "Salão Allegro II": "Ambiente moderno com acústica aprimorada",
        "Espaço Vila Nova": "Salão prático e versátil para qualquer tipo de evento",
        "Salão Platinum II": "Espaço premium com iluminação cenográfica",
        "Espaço Jardim Real": "Área verde com espaço para cerimônias ao ar livre",
        "Salão Bella Vista": "Ambiente elevado com vista panorâmica",
        "Espaço Lumina": "Espaço iluminado com LED e decoração clean",
        "Salão Estilo": "Espaço compacto e funcional",
        "Espaço Allegretto": "Ambiente pequeno ideal para eventos intimistas",
        "Salão Primavera": "Espaço florido com decoração temática",
        "Espaço Golden Hall": "Salão de luxo com palco e auditório integrados",
        "Salão Jardim Bela Vida": "Ambiente externo com jardins integrados",
        "Espaço Magnifique": "Espaço elegante e amplo com estrutura completa",
        "Salão Elite II": "Ambiente climatizado com acabamento premium",
        "Espaço Tradição": "Salão rústico inspirado em elementos regionais",
        "Salão Horizonte": "Espaço amplo com vista panorâmica",
        "Espaço Viva La Vida": "Ambiente moderno com área para dança",
        "Salão Royal Palace": "Salão de gala com decoração luxuosa",
        "Espaço Blue Garden": "Ambiente externo com iluminação azul decorativa",
        "Salão Platinum Gold": "Espaço nobre com acabamento dourado",
        "Espaço Royal Light": "Ambiente claro e sofisticado",
        "Salão Jardim Europa II": "Salão moderno com jardins renovados",
        "Espaço Bella Noite": "Ambiente intimista com iluminação suave",
        "Salão Cristal Palace": "Espaço luxuoso com lustres de cristal",
        "Espaço Luxor": "Ambiente premium com arquitetura moderna",
        "Salão Garden Prime": "Espaço amplo com jardins ao redor",
        "Espaço Monte Azul": "Ambiente acolhedor com decoração azul",
        "Salão Crystal Light": "Espaço pequeno com iluminação de destaque",
        "Espaço Vale Encantado": "Ambiente externo com paisagem natural",
        "Salão Roma II": "Espaço clássico inspirado em arquitetura italiana"
    };
    
    
    function calcularValor() {
        const sala = document.getElementById("NomeLocal").value;
        const dias = parseInt(document.getElementById("DiasAlugados").value);
        if (!sala || !dias || isNaN(dias)) return 0;

        const tamanho = tamanhosSalas[sala];
        const valorDia = precoPorTamanho[tamanho] || 0;

        return valorDia * dias;
    };

   
    function atualizarValor() {
        const sala = document.getElementById("NomeLocal").value;
        
        const valor = calcularValor();
        document.getElementById("Valor").value = 
            valor.toLocaleString("pt-BR", { style: "currency", currency: "BRL" });
        
        const tamanho = tamanhosSalas[sala];
        document.getElementById("Tamanho").value = tamanho || "";

        const descricao = descricoesSalas[sala];
        document.getElementById("Descricao").value = descricao || ""; 
    }

    
    document.getElementById("NomeLocal").addEventListener("change", atualizarValor);
    document.getElementById("DiasAlugados").addEventListener("input", atualizarValor);

    

    
    const tamanhoMap = {
        0: "Pequeno",
        1: "Medio",
        2: "Grande"
    };

    
    function calcularDataFim(dataInicio, diasAlugados) {
        
        const data = new Date(dataInicio + 'T00:00:00'); 
        
        
        data.setDate(data.getDate() + diasAlugados - 1);
        
        
        return data.toLocaleDateString('pt-BR');
    }

    function carregarReservasNaTabela(reservas) {
        const tbody = document.getElementById('tabela-reservas');
        tbody.innerHTML = '';

        console.log("Carregando reservas:", reservas);

        if (!reservas || reservas.length === 0) {
            tbody.innerHTML = '<tr><td colspan="10">Nenhuma reserva encontrada.</td></tr>';
            return;
        }

        reservas.forEach((reserva, index) => {
            console.log(`Processando reserva ${index}:`, reserva);
           
            const dataInicioFormatada = new Date(reserva.DataInicio).toLocaleDateString('pt-BR');
            const dataFim = calcularDataFim(reserva.DataInicio, reserva.DiasAlugados);
            const tamanho = tamanhoMap[reserva.Tamanho] || 'Desconhecido';
            
            const valorTotal = parseFloat(reserva.ValorTotal) || 0; 
            const valorFormatado = valorTotal.toLocaleString("pt-BR", { style: "currency", currency: "BRL" });
            
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td>${reserva.Id}</td>
                <td>${reserva.Nome}</td>
                <td>${reserva.Telefone}</td>
                <td>${dataInicioFormatada}</td>
                <td>${dataFim}</td>
                <td>${tamanho}</td>
                <td>${reserva.NomeLocal}</td>
                <td>${valorFormatado}</td>
                <td>${reserva.Descricao}</td>
                <td>
                    <button onclick="editarReserva(${reserva.Id})">Editar</button>
                    <button onclick="deletarReserva(${reserva.Id})">Deletar</button>
                </td>
            `;
            tbody.appendChild(tr);
        });
    }

   
    async function buscarERenderizarReservas() {
        try {
            console.log("Buscando reservas de:", API_BASE_URL + '/reservas');
            
            const response = await fetch(API_BASE_URL + '/reservas', {
                method: 'GET',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                mode: 'cors',
                credentials: 'omit'
            });
            
            console.log("Response status:", response.status);
            
            if (!response.ok) {
                throw new Error(`Erro ao buscar reservas: ${response.statusText}`);
            }

            const reservas = await response.json();
            console.log("Reservas recebidas:", reservas);
            carregarReservasNaTabela(reservas); 

        } catch (error) {
            console.error("Não foi possível carregar a lista de reservas.", error);

            document.getElementById('tabela-reservas').innerHTML = `<tr><td colspan="10">Erro ao carregar os dados. Verifique se o servidor C# está rodando: ${error.message}</td></tr>`;
        }
    }
    
   

   
    async function adicionarOuAtualizarReserva() {
        const id = document.getElementById("Id").value;
        const isUpdate = id && !isNaN(parseInt(id)); 

        const nomeLocalString = document.getElementById("NomeLocal").value;
        const tamanhoString = tamanhosSalas[nomeLocalString];
        
       
        const tamanhoEnum = parseInt(Object.keys(tamanhoMap).find(key => tamanhoMap[key] === tamanhoString)) || 0; 

        const dados = {
            Nome: document.getElementById("Nome").value,
            Telefone: document.getElementById("Telefone").value,
            DataInicio: document.getElementById("DataInicio").value, 
            DiasAlugados: parseInt(document.getElementById("DiasAlugados").value),
            Tamanho: tamanhoEnum, 
            NomeLocal: nomeLocalString,
            
            ValorTotal: parseFloat(document.getElementById("Valor").value
        .replace('R$', '')      
        .trim()                
        .replace(/\./g, '')
        .replace(',', '.')),    

    Descricao: document.getElementById("Descricao").value
        };

        if (isUpdate) {
            dados.Id = parseInt(id);
        }

        if (!dados.Nome || !dados.Telefone || !dados.DataInicio || !dados.DiasAlugados || dados.ValorTotal <= 0) {
            alert("Preencha todos os campos obrigatórios e calcule o valor.");
            return;
        }

        const method = isUpdate ? 'PUT' : 'POST';
        const url = isUpdate ? `${API_BASE_URL}/reservas/${dados.Id}` : `${API_BASE_URL}/reservas`;

        try {
            const response = await fetch(url, {
                method: method,
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                },
                mode: 'cors',
                credentials: 'omit',
                body: JSON.stringify(dados)
            });

            if (response.ok) {
                alert(`Reserva ${isUpdate ? 'atualizada' : 'criada'} com sucesso!`);
                
                document.getElementById("Id").value = '';
                document.getElementById("Nome").value = '';
                document.getElementById("Telefone").value = '';
                document.getElementById("DataInicio").value = '';
                document.getElementById("DiasAlugados").value = '';
                document.getElementById("NomeLocal").value = '';
                document.getElementById("Tamanho").value = '';
                document.getElementById("Valor").value = '';
                document.getElementById("Descricao").value = '';
                
                buscarERenderizarReservas(); 
            } else {
                const errorText = await response.text();
                alert(`Erro ao ${isUpdate ? 'atualizar' : 'criar'} reserva: ` + errorText);
            }
        } catch (error) {
            console.error('Erro de rede/servidor:', error);
            alert('Erro ao tentar conectar com o servidor. Verifique o console.');
        }
    }

   
    async function editarReserva(id) {
        console.log("Ação: Editar reserva ID:", id);
        
        try {
            const response = await fetch(`${API_BASE_URL}/reservas/${id}`, {
                method: 'GET',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                mode: 'cors',
                credentials: 'omit'
            });

            if (!response.ok) {
                throw new Error(`Reserva não encontrada: ${response.statusText}`);
            }

            const reserva = await response.json();
            console.log("Reserva carregada:", reserva);

            // Preencher o formulário com os dados da reserva (PascalCase do C#)
            document.getElementById("Id").value = reserva.Id;
            document.getElementById("Nome").value = reserva.Nome;
            document.getElementById("Telefone").value = reserva.Telefone;
            document.getElementById("DataInicio").value = reserva.DataInicio;
            document.getElementById("DiasAlugados").value = reserva.DiasAlugados;
            
            // Encontrar o nome local e atualizar
            document.getElementById("NomeLocal").value = reserva.NomeLocal;
            atualizarValor(); // Atualiza tamanho, valor e descrição
            
            document.getElementById("Descricao").value = reserva.Descricao;
            
            // Scroll até o formulário
            document.querySelector('.cadastro').scrollIntoView({ behavior: 'smooth' });
            
            alert(`Reserva ID ${id} carregada. Faça as alterações e clique em "Confirmar Reserva" para atualizar.`);

        } catch (error) {
            console.error("Erro ao editar reserva:", error);
            alert(`Erro ao carregar a reserva: ${error.message}`);
        }
    }

    
    async function deletarReserva(id) {
        if (!confirm(`Tem certeza que deseja deletar a reserva ID ${id}?`)) {
            return;
        }
        
        try {
            const response = await fetch(`${API_BASE_URL}/reservas/${id}`, { 
                method: 'DELETE',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                mode: 'cors',
                credentials: 'omit'
            });
            
            if (response.ok) {
                alert(`Reserva ID ${id} deletada com sucesso.`);
                buscarERenderizarReservas(); 
            } else if (response.status === 404) {
                 alert(`Erro: Reserva ID ${id} não encontrada.`);
            } else {
                const errorText = await response.text();
                throw new Error(`Erro ao deletar: ${errorText}`);
            }
        } catch (error) {
            console.error("Erro ao deletar reserva:", error);
            alert("Ocorreu um erro ao deletar a reserva. Veja o console para detalhes.");
        }
    }
    
    
    function filtrarLivros() {
        // Obter valores dos filtros
        const filtroId = document.getElementById("filtroId").value;
        const filtroNome = document.getElementById("filtroNome").value.toLowerCase();
        const filtroTelefone = document.getElementById("filtroTelefone").value;
        const filtroDataInicio = document.getElementById("filtroDataInicio").value;
        const filtroTamanho = document.getElementById("filtroTamanho").value;
        const filtroNomeLocal = document.getElementById("filtroNomeLocal").value.toLowerCase();
        const filtroValor = document.getElementById("filtroValor").value;

        const tbody = document.getElementById('tabela-reservas');
        const linhas = tbody.querySelectorAll('tr');
        let totalVisivel = 0;

        linhas.forEach(linha => {
            const colunas = linha.querySelectorAll('td');
            if (colunas.length === 0) return; // Pular se não tem colunas

            const id = colunas[0]?.textContent.trim();
            const nome = colunas[1]?.textContent.trim().toLowerCase();
            const telefone = colunas[2]?.textContent.trim();
            const tamanho = colunas[5]?.textContent.trim();
            const nomeLocal = colunas[6]?.textContent.trim().toLowerCase();
            const valor = colunas[7]?.textContent.trim();

            let mostrar = true;

            if (filtroId && id !== filtroId) mostrar = false;
            if (filtroNome && !nome.includes(filtroNome)) mostrar = false;
            if (filtroTelefone && !telefone.includes(filtroTelefone)) mostrar = false;
            if (filtroTamanho && tamanho !== filtroTamanho) mostrar = false;
            if (filtroNomeLocal && !nomeLocal.includes(filtroNomeLocal)) mostrar = false;
            if (filtroValor && !valor.includes(filtroValor)) mostrar = false;

            linha.style.display = mostrar ? '' : 'none';
            if (mostrar) totalVisivel++;
        });

        if (totalVisivel === 0) {
            tbody.innerHTML = '<tr><td colspan="10" style="text-align: center;">Nenhuma reserva encontrada com os filtros aplicados.</td></tr>';
        }
    }

    function limparFiltros() {
        
        document.getElementById("filtroId").value = '';
        document.getElementById("filtroNome").value = '';
        document.getElementById("filtroTelefone").value = '';
        document.getElementById("filtroDataInicio").value = '';
        document.getElementById("filtroDataFim").value = '';
        document.getElementById("filtroTamanho").value = '';
        document.getElementById("filtroNomeLocal").value = '';
        document.getElementById("filtroValor").value = '';
        document.getElementById("filtroDescricao").value = '';
        
        buscarERenderizarReservas(); 
    }

    

    
    buscarERenderizarReservas(); 
    
</script>